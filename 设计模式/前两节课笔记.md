# 设计模式简介

设计模式是软件开发人员在软件开发过程中面临的一般问题的解决方案。是一套被反复使用的、多数人知晓的、经过分类编目的、代码设计经验的总结。





# 设计模式六大原则

## **1、开闭原则（Open Close Principle）**

开闭原则的意思是：**对扩展开放，对修改关闭**。在程序需要进行拓展的时候，不能去修改原有的代码，实现一个热插拔的效果。简言之，是为了使程序的扩展性好，易于维护和升级。想要达到这样的效果，我们需要使用接口和抽象类，后面的具体设计中我们会提到这点。

实现方法：

**多态**

- 编译时多态性：通过重载函数和运算符重载实现
- 运行时多态性：通过虚函数和继承实现

**虚函数**

- 基类使用虚方法（此时派生类自动成为虚方法，可以指出也可以不指出）。
- 基类不使用虚方法，在派生类直接重定义该方法。

模板方法：

![image-20210906200729139](C:\Users\eess6\AppData\Roaming\Typora\typora-user-images\image-20210906200729139.png)

过去式是指模板类，例如“兽”

未来式是指狗、狼等等

在寻找食物这个动作里，只要是调用虚函数，就是通过this指针调用的——代码里看不到



![image-20210906202414285](C:\Users\eess6\AppData\Roaming\Typora\typora-user-images\image-20210906202414285.png)



# Command

![image-20210915092615897](C:\Users\eess6\AppData\Roaming\Typora\typora-user-images\image-20210915092615897.png)

command：对程序发出的某种需求——需要调用某种函数。把对象和对象的函数结合在一起——成为一个object，叫做command，是receiver和action的结合。

还没有执行，如何执行：Excute();

如何调用command？通过对象调用函数



类图：

![image-20210915092630122](C:\Users\eess6\AppData\Roaming\Typora\typora-user-images\image-20210915092630122.png)

三角形表示继承，斜体表示抽象（cpp虚函数/java abstract）

正体：不是虚函数，真正实现了的







![image-20210925091128988](C:\Users\eess6\AppData\Roaming\Typora\typora-user-images\image-20210925091128988.png)

这个是父类，=0表示纯虚函数。





![image-20210918152722070](C:\Users\eess6\AppData\Roaming\Typora\typora-user-images\image-20210918152722070.png)成员函数指针

57行，成员函数指针，因此调用格式为70行，而且必须带星号。定义一个action，指定为Receiver的成员函数。

59-60：将外界指定的action和receiver记录下来。

70：通过receriver执行（调用）action。成员函数指针。



